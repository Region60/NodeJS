
Устанавливаем пакет express-session. Подключаем и начтраиваем его в index.js
Создаем папку, где будем хранить middleware. В ней создаем файл variables.js. Далее создаем функцию, которая
будет добалвять еще дно поле для респонса и подключаем ее в index.js после начала сессии. В auth.js создаем рооутер
который будет который будет присваивать ТРУ полю isAuthenticated и делать редирект на главную страницу.
В файле навбар создаем условие для полей которые не должны отображаться, если пользователь не зарегистрирован

Сохранение сессии.
Устанавливаем пакет connect-mongodb-session. ОН  нужен для синхронизации express-session  с БД монгодб.
Подключаем пакет в index.js после подключения сессии

Защита роутов.
Создаем миддлвеер в папке middleware. Там создаем функцию которая проверяет значение isAuthenticated.
Добавляем в роутах auth для тех которые хотим защитить